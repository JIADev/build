<?xml version="1.0"?>
<cb:config-template xmlns:cb="urn:ccnet.config.builder">
  <cb:define cmdExe="C:\WINDOWS\system32\cmd.exe" />
  <cb:define ccNetSourceWorkingDir="C:\build" />
  <cb:define ccNetConfigSource="$(ccNetSourceWorkingDir)\config\cruisecontrol\jia-build1" />
  <cb:define ccNetServer="C:\Program Files (x86)\CruiseControl.NET\server" />
  <cb:define ccNetConfigRepo="http://source.jenkon.com/hg/hgwebdir.cgi/build" />
  <project name="ccnet" category="ccnet" queue="ccnet">
    <triggers>
      <intervalTrigger seconds="60" />
    </triggers>
    <sourcecontrol 
	type="hg" 
	workingDirectory="$(ccNetSourceWorkingDir)"
	repo="$(ccNetConfigRepo)"
	autoGetSource="true" 
	timeout="12000000"
	multipleHeadsFail="false"
	tagOnSuccess="false"
	commitModifications="false"
	commitUntracked="false"
	purgeModifications="false"
	revertModifications="false"
	committerName="CruiseControl.NET"
	>
    </sourcecontrol>
    <tasks>
      <exec 
	  executable="$(ccNetServer)\CCValidator.exe"
	  buildArgs="$(ccNetConfigSource)\ccnet.config --nogui" />
      <exec executable="$(cmdExe)" 
	    buildArgs="/c copy $(ccnetConfigSource)\*.xml $(ccNetServer)" />
      <exec executable="$(cmdExe)" 
	    buildArgs="/c copy $(ccnetConfigSource)\*.config $(ccNetServer)" />
    </tasks>
  </project>  
</cb:config-template>
